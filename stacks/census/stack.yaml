# Label is the displayed name of this stack
label: "Census"
# Should a hopscotch tour be displayed.
has_tour: false
# The hash to load if the user hasn't started using this stack.
# If you leave this blank the slices will start with nothing selected or defaults.
initial_hash: ""
# Provides data to the global filters
# Can be either a data service class in your service.py file (e.g. 'realtorservice.FilterService')
# or a json file in the fixtures directory (e.g. 'filters.json')
global_filters_service: "censusv2service.FilterService"
slices:
#
# Slice documentation: http://dev.fruitiondata.com/static/docs/slices.html
# How to build titles: http://dev.fruitiondata.com/static/docs/title-templates.html
#
#- slice_type: "option-chooser"
#  # The title line for the slice.
#  title: "Explore your data"
#  # Detailed configuration for the slice.
#  config:
#    "maxSelections": 1
#    "minSelections": 1
#    "optionExtraClass": "option-item-fixed-width"
#    "optionTemplate": |-
#      <div data-id="{{=id}}" class="group-container__item"><div class="group-container__item__label">{{=label}}</div><div class="group-container__item__value">{{=formattedValue}}</div></div>
#    "showTitles": false
#  # Provides data to the slice
#  # Can be either a data service class in your service.py file (e.g. 'realtorservice.RankedListService')
#  # or a json file in the fixtures directory (e.g. 'rankedlist.json')
#  data_service: "censusv2service.KeyMetricsService"

- slice_type: "option-chooser"
  slug: "foo"
  # The title line for the slice.
  title: "This should go away"
  # Detailed configuration for the slice.
  config:
    "optionExtraClass": "option-item-fixed-width"
#    {{=format('value', undefined, 'id')}} means: in the current object, format value  of a 'value' field
#    we don't have a static format specifier (undefined), but you can lookup the format in metadata using the 'id' field's value
#    so, the specifier is metadata[item.id].format
    "optionTemplate": |-
      <div data-id="{{= datum.id }}" class="group-container__item"><div class="group-container__item__label">{{= datum.label}}</div><div class="group-container__item__value">{{= datum.format('value', undefined, 'id') }}</div></div>
    "showTitles": false
    "minSelections": 1
    "maxSelections": 1
  # Provides data to the slice
  # Can be either a data service class in your service.py file (e.g. 'realtorservice.RankedListService')
  # or a json file in the fixtures directory (e.g. 'rankedlist.json')
  data_service: "censusv2service.FirstChooserV3Service"

- slice_type: "option-chooser"
  slug: "bar"
  # The title line for the slice.
  title: "This could stay here"
  # Detailed configuration for the slice.
  config:
    "optionExtraClass": "option-item-fixed-width"
    "optionTemplate": |-
      <div data-id="{{= datum.id }}" class="group-container__item"><div class="group-container__item__label">{{= datum.label }}</div><div class="group-container__item__value">{{= datum.format('value', ',.2s') }}</div></div>
    "showTitles": false
    "minSelections": 1
    "maxSelections": 1

  # TODO: this eventmap could go away, because in v3 it is automatic, but we have it here explicitly to test it.
  eventmap:
  - "foo"
  # Provides data to the slice
  # Can be either a data service class in your service.py file (e.g. 'realtorservice.RankedListService')
  # or a json file in the fixtures directory (e.g. 'rankedlist.json')
  data_service: "censusv2service.SecondChooserV3Service"

- slice_type: "distribution"
  slug: "distribution1"
  # The title line for the slice.
  title: "Distribution slice"
  # Detailed configuration for the slice.
  config:
    "cellTemplateName": "#distribution-template"
    "colors": {"Ages": {"range": ["#f00", "#0f0"], "field": "value"} }
  # Provides data to the slice
  # Can be either a data service class in your service.py file (e.g. 'realtorservice.RankedListService')
  # or a json file in the fixtures directory (e.g. 'rankedlist.json')
  data_service: "censusv2service.DistributionV3Service"

- slice_type: "details-table"
  slug: "table23"
  # The title line for the slice.
  title: "Details table2"
  # Detailed configuration for the slice.
  config:
    "name_field": "state"
    "slickgrid_id_field": "row_id"
  # Provides data to the slice
  # Can be either a data service class in your service.py file (e.g. 'realtorservice.RankedListService')
  # or a json file in the fixtures directory (e.g. 'rankedlist.json')
  data_service: "censusv2service.TableV3Service"
- slice_type: "ranked-list"
  slug: "COOKIES"
  title: "Here's a breakout of your responses."
  config:
    "disableSort": true
  style:
    - "section-content"
  data_service: "censusv2service.RankedListV3Service"

#
#
#- slice_type: "lollipop"
#  slug: "lollipop1"
#  title: "I am a lollipop"
#  config:
#    "groups":
#      "default":
#        "max": 100
#    "minSelections": 1
#    "showStick": true
#  data_service: "sample-lollipop.json"
#
#- slice_type: "lollipop"
#  slug: "lollipop2"
#  title: "I am another lollipop"
#  config:
#    "groups":
#      "default":
#        "max": 100
#    "minSelections": 1
#    "showStick": true
#  data_service: "sample-lollipop-singledataset.json"

- slice_type: "lollipop"
  slug: "lollipop-jam1"
  title: "JAM lollipop"
  config:
    "groups":
      "default":
        "max": 100
    "minSelections": 1
    "showStick": true
  data_service: "censusv2service.LollipopV3Service"

- slice_type: "free-form"
  slug: "jam-free-form1"
  style:
  - "title-large"
# bare: true should automatically enable WithNoData mixin, set config.baseTemplateName and tweak CSS
# see https://juiceanalytics.atlassian.net/browse/JB-682 for details
  bare: true
  mixins:
  - options: {}
    target: "view"
    class: "WithNoData"
  config:
    baseTemplateName: "#base-slice-bare-template"
    contentTemplate: "#jam-free-form1-template"
  data_service: "censusv2service.FreeFormV3Service1"

- slice_type: "free-form"
  slug: "jam-free-form2"
  style:
  - "title-large"
# bare: true should automatically enable WithNoData mixin, set config.baseTemplateName and tweak CSS
# see https://juiceanalytics.atlassian.net/browse/JB-682 for details
  bare: true
  mixins:
  - options: {}
    target: "view"
    class: "WithNoData"
  config:
    baseTemplateName: "#base-slice-bare-template"
    contentTemplate: "#jam-free-form2-template"
  data_service: "censusv2service.FreeFormV3Service2"

- slice_type: "free-form"
  slug: "free-form1"
  style:
  - "title-large"
# bare: true should automatically enable WithNoData mixin, set config.baseTemplateName and tweak CSS
# see https://juiceanalytics.atlassian.net/browse/JB-682 for details
  bare: true
  mixins:
  - options: {}
    target: "view"
    class: "WithNoData"
  config:
    baseTemplateName: "#base-slice-bare-template"
    contentTemplate: "#free-form1-template"
  data_service: "sample-free-form.json"

- slice_type: "free-form"
  slug: "free-form2"
  style:
  - "title-large"
# bare: true should automatically enable WithNoData mixin, set config.baseTemplateName and tweak CSS
# see https://juiceanalytics.atlassian.net/browse/JB-682 for details
  bare: true
  mixins:
  - options: {}
    target: "view"
    class: "WithNoData"
  config:
    baseTemplateName: "#base-slice-bare-template"
    contentTemplate: "#free-form2-template"
  data_service: "sample-free-form.json"


- slice_type: "card"
  slug: "card1"
  title: "Card"
  config:
    "cardTemplateName": "#card-template"
  data_service: "sample-card.json"

- slice_type: "card"
  slug: "jam-card1"
  title: "Card"
  config:
    "cardTemplateName": "#jam-card-template"
  data_service: "censusv2service.CardV3Service2"


- slice_type: "nine-box"
  slug: "ninebox"
  title: "Nine box"
  config:
    "axisLabels": [{"labels": ["Low", "Medium", "High"]}, {"labels": ["Slow", "Normal", "Fast"]}]
    "boxLabels":
    - "col": 2
      "position": "ne"
      "row": 0
      "text": "Small exposure, but high conversion rate"
    "sizeMinMax":
    - 5
    - 20
  data_service: "sample-ninebox.json"
